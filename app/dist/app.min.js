function AnnyFactory(n){var t={};return t.init=function(){t.newNetwork([new anny.Layer(2),new anny.Layer(1)]),t.trainer=new anny.Trainer},t.activate=function(n){t.network.activate(n),t.emitChange()},t.data=anny.DATA,t.getRandomLayers=function(){var n=[new anny.Layer(2)];return _.times(_.random(1,3),function(){n.push(new anny.Layer(_.random(3,5)))}),n.push(new anny.Layer(1)),n},t.train=function(n){var e=["Predictions after training:"];t.trainer.train(t.network,n),_.each(n,function(n){var a=n.input,o=t.network.activate(a);e.push("["+a.toString()+"] == "+(o>=.5)+" "+o)}),console.log(e.join("\n")),t.emitChange()},t.newNetwork=function(n){t.network=new anny.Network(n||t.getRandomLayers()),t.emitChange()},t.emitChange=function(){n.$broadcast("anny:changed"),window.network=t.network},t.init(),t}function visNetworkOptions(){var n={};return n.nodes={borderWidth:.1,borderWidthSelected:.1,shape:"dot",scaling:{min:5,max:15},font:{color:"#777",size:12,face:"Lato"},labelHighlightBold:!0,mass:1},n.groups={normal:{color:{border:"hsl(210, 20%, 25%)",background:"hsl(210, 80%, 80%)",hover:{border:"hsl(210, 35%, 45%)",background:"hsl(210, 80%, 80%)"},highlight:{border:"hsl(210, 60%, 70%)",background:"hsl(210, 80%, 80%)"}}},bias:{borderWidth:2,borderWidthSelected:2,color:{border:"hsl(0, 0%, 40%)",background:"transparent",hover:{border:"hsl(0, 0%, 60%)",background:"transparent"},highlight:{border:"hsl(0, 0%, 80%)",background:"transparent"}}}},n.edges={smooth:{enabled:!1,type:"dynamic",roundness:.5},scaling:{min:.5,max:8},hoverWidth:1,selectionWidth:1.5},n.layout={hierarchical:{direction:"LR"}},n.interaction={hover:!0,tooltipDelay:150},n.physics={enabled:!0,hierarchicalRepulsion:{centralGravity:0,springLength:50,springConstant:.002,nodeDistance:80,damping:.4},maxVelocity:50,minVelocity:.1,stabilization:{enabled:!0,iterations:0,updateInterval:0,onlyDynamicEdges:!1,fit:!0},timestep:.5},n}function visNetwork(n,t,e){return{replace:!0,scope:{},template:'<div class="vis-network"></div>',link:function(a,o){a.getData=function(){var n=[],e=[];return _.each(t.network.allLayers,function(t,a){_.each(t.neurons,function(t){var o=t.id,r=t.input.toFixed(3),i=t.output.toFixed(3),s=t.delta.toFixed(6);n.push({id:o,title:["<b>id:</b> ",o,"<br/>","<b>delta:</b> ",s,"<br/>"].join(""),level:a,label:(t.isInput()?["\no:",i]:t.isOutput()?["\ni:",r,"\no:",i]:t.isBias?["\no:",i]:["\ni:",r,"\no:",i]).join(" "),value:Math.abs(i),group:t.isBias?"bias":"normal"}),_.each(t.outgoing,function(n){var t=n.weight.toFixed(3);e.push({from:n.source.id,to:n.target.id,value:Math.abs(t),title:"weight: "+t,color:{color:t>=0?"hsl(210, 20%, 25%)":"hsl(30, 15%, 25%)",hover:t>=0?"hsl(210, 35%, 45%)":"hsl(30, 40%, 40%)",highlight:t>=0?"hsl(210, 60%, 70%)":"hsl(30, 60%, 60%)"}})})})}),{nodes:new vis.DataSet(n),edges:new vis.DataSet(e)}},a.setData=function(){a.network.setData(a.getData())},e.$on("anny:changed",function(){a.setData()}),a.network=new vis.Network(o[0],a.getData(),n)}}}angular.module("App",["anny","App.vis","App.toolbar"]),angular.module("anny",[]),angular.module("App.toolbar",[]),angular.module("App.vis",[]),AnnyFactory.$inject=["$rootScope"],angular.module("anny").factory("AnnyFactory",AnnyFactory),angular.module("App.vis").factory("visNetworkOptions",visNetworkOptions),angular.module("App.toolbar").directive("toolbar",["AnnyFactory",function(n){return{replace:!0,scope:{},templateUrl:"app/dist/components/toolbar/toolbar.html",link:function(t){t.resetNet=function(){n.init()},t.randomNet=function(){n.newNetwork()},t.activateRandom=function(){var t=[];_.times(n.network.inputLayer.neurons.length,function(){t.push(_.random(-1,1,!0))}),n.activate(t)},t.trainORGate=function(){n.train(n.data.ORGate)},t.trainXORGate=function(){n.train(n.data.XORGate)},t.trainANDGate=function(){n.train(n.data.ANDGate)},t.trainNANDGate=function(){n.train(n.data.NANDGate)}}}}]),visNetwork.$inject=["visNetworkOptions","AnnyFactory","$rootScope"],angular.module("App.vis").directive("visNetwork",visNetwork);