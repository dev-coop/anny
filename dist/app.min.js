function visNetworkOptions(){var e={};return e.nodes={borderWidth:.1,borderWidthSelected:.1,shape:"dot",scaling:{min:5,max:15},font:{color:"#777",size:12,face:"Lato"},labelHighlightBold:!0,mass:1},e.groups={normal:{color:{border:"hsl(210, 20%, 25%)",background:"hsl(210, 80%, 80%)",hover:{border:"hsl(210, 35%, 45%)",background:"hsl(210, 80%, 80%)"},highlight:{border:"hsl(210, 60%, 70%)",background:"hsl(210, 80%, 80%)"}}},gate:{color:{border:"hsl(30, 15%, 25%)",background:"hsl(30, 100%, 70%)",hover:{border:"hsl(30, 40%, 40%)",background:"hsl(30, 100%, 70%)"},highlight:{border:"hsl(30, 60%, 60%)",background:"hsl(30, 100%, 70%)"}}}},e.edges={smooth:{enabled:!1,type:"dynamic",roundness:.5},scaling:{min:.2,max:4},hoverWidth:1,selectionWidth:1.5},e.layout={hierarchical:{direction:"LR"}},e.interaction={hover:!0,tooltipDelay:150},e.physics={enabled:!0,hierarchicalRepulsion:{centralGravity:0,springLength:50,springConstant:.002,nodeDistance:80,damping:.4},maxVelocity:50,minVelocity:.1,stabilization:{enabled:!0,iterations:0,updateInterval:0,onlyDynamicEdges:!1,fit:!0},timestep:.5},e}function visNetwork(e){return{replace:!0,scope:{network:"=",nodes:"=",edges:"="},template:'<div class="vis-network"></div>',link:function(t,o,n){t.getData=function(){var e=[],o=[];return _.each(t.network.layers,function(t,n){_.each(t.neurons,function(t){var r=t.bias.toFixed(3),i=t.id,a=t.input.toFixed(3),l=t.output.toFixed(3);e.push({id:i,title:["<b>id:</b> ",i,"<br/>","<b>in:</b> ",a,"<br/>","<b>out:</b> ",l,"<br/>","<b>bias:</b> "+r].join(""),level:n,label:l,value:Math.abs(r),group:r>0?"gate":"normal"}),_.each(t.outgoing,function(e){var t=e.weight;o.push({from:e.source.id,to:e.target.id,value:Math.abs(t),title:"weight: "+t,color:{color:t>=0?"hsl(210, 20%, 25%)":"hsl(30, 15%, 25%)",hover:t>=0?"hsl(210, 35%, 45%)":"hsl(30, 40%, 40%)",highlight:t>=0?"hsl(210, 60%, 70%)":"hsl(30, 60%, 60%)"}})})})}),{nodes:new vis.DataSet(e),edges:new vis.DataSet(o)}},t.update=function(){console.log("update network"),r.setData(t.getData())};var r=new vis.Network(o[0],t.getData(),e);t.$watch(function(){return t.network.input.neurons[0].input},function(e,o){angular.equals(e,o)||t.update()})}}}var inputs=_.random(2,8),hidden=_.random(4,8),outputs=_.random(1,3),network=new Network(inputs,hidden,outputs);angular.module("App",["App.vis","App.toolbar"]).controller("Controller",["$scope",function(e){e.network=network}]),angular.module("App.toolbar",[]),angular.module("App.vis",[]),angular.module("App.vis").factory("visNetworkOptions",visNetworkOptions),angular.module("App.toolbar").directive("toolbar",function(){return{replace:!0,scope:{network:"="},templateUrl:"components/toolbar/toolbar.html",link:function(e,t,o){e.activateRandom=function(){for(var t=[],o=0;o<e.network.input.neurons.length;o+=1)t.push(_.random(!0));e.network.activate(t)}}}}),visNetwork.$inject=["visNetworkOptions"],angular.module("App.vis").directive("visNetwork",visNetwork);