function AnnyFactory(n){var t={};return t.network={},t.init=function(){t.newNetwork()},t.getRandomLayers=function(){var n=_.random(2,6),t=_.random(1,2),o=_.random(0,2),e=[];return _.times(o,function(){e.push(_.random(3,5))}),[].concat(n,e,t)},t.newNetwork=function(n){n=n||t.getRandomLayers();var o=new anny.Network(n);_.each(t.network,function(n,o){delete t.network[o]}),t.network=angular.extend(t.network,o),t.emitChange()},t.emitChange=function(){n.$broadcast("anny:changed")},t.init(),t}function visNetworkOptions(){var n={};return n.nodes={borderWidth:.1,borderWidthSelected:.1,shape:"dot",scaling:{min:5,max:15},font:{color:"#777",size:12,face:"Lato"},labelHighlightBold:!0,mass:1},n.groups={normal:{color:{border:"hsl(210, 20%, 25%)",background:"hsl(210, 80%, 80%)",hover:{border:"hsl(210, 35%, 45%)",background:"hsl(210, 80%, 80%)"},highlight:{border:"hsl(210, 60%, 70%)",background:"hsl(210, 80%, 80%)"}}},gate:{color:{border:"hsl(30, 15%, 25%)",background:"hsl(30, 100%, 70%)",hover:{border:"hsl(30, 40%, 40%)",background:"hsl(30, 100%, 70%)"},highlight:{border:"hsl(30, 60%, 60%)",background:"hsl(30, 100%, 70%)"}}}},n.edges={smooth:{enabled:!1,type:"dynamic",roundness:.5},scaling:{min:.2,max:4},hoverWidth:1,selectionWidth:1.5},n.layout={hierarchical:{direction:"LR"}},n.interaction={hover:!0,tooltipDelay:150},n.physics={enabled:!0,hierarchicalRepulsion:{centralGravity:0,springLength:50,springConstant:.002,nodeDistance:80,damping:.4},maxVelocity:50,minVelocity:.1,stabilization:{enabled:!0,iterations:0,updateInterval:0,onlyDynamicEdges:!1,fit:!0},timestep:.5},n}function visNetwork(n,t,o){return{replace:!0,scope:{},template:'<div class="vis-network"></div>',link:function(e,a,r){e.getData=function(){var n=[],o=[];return _.each(t.network.layers,function(t,e){_.each(t.neurons,function(t){var a=t.bias.toFixed(3),r=t.id,i=t.input.toFixed(3),l=t.output.toFixed(3);n.push({id:r,title:["<b>id:</b> ",r,"<br/>","<b>in:</b> ",i,"<br/>","<b>out:</b> ",l,"<br/>","<b>bias:</b> "+a].join(""),level:e,label:l,value:Math.abs(a),group:a>0?"gate":"normal"}),_.each(t.outgoing,function(n){var t=n.weight.toFixed(3);o.push({from:n.source.id,to:n.target.id,value:Math.abs(t),title:"weight: "+t,color:{color:t>=0?"hsl(210, 20%, 25%)":"hsl(30, 15%, 25%)",hover:t>=0?"hsl(210, 35%, 45%)":"hsl(30, 40%, 40%)",highlight:t>=0?"hsl(210, 60%, 70%)":"hsl(30, 60%, 60%)"}})})})}),{nodes:new vis.DataSet(n),edges:new vis.DataSet(o)}},e.setData=function(){e.network.setData(e.getData())},o.$on("anny:changed",function(){e.setData()}),e.network=new vis.Network(a[0],e.getData(),n)}}}angular.module("App",["anny","App.vis","App.toolbar"]),angular.module("App.toolbar",[]),angular.module("anny",[]),angular.module("App.vis",[]),AnnyFactory.$inject=["$rootScope"],angular.module("anny").factory("AnnyFactory",AnnyFactory),angular.module("App.vis").factory("visNetworkOptions",visNetworkOptions),angular.module("App.toolbar").directive("toolbar",["AnnyFactory","$window","$rootScope",function(n,t,o){return{replace:!0,scope:{},templateUrl:"dist/components/toolbar/toolbar.html",link:function(o,e,a){o.init=function(){},o.randomNet=function(){n.newNetwork()},o.activateRandom=function(){for(var t=[],o=0;o<n.network.input.neurons.length;o+=1)t.push(_.random(!0));n.network.activate(t)},o.refresh=function(){t.location.reload()},o.init()}}}]),visNetwork.$inject=["visNetworkOptions","AnnyFactory","$rootScope"],angular.module("App.vis").directive("visNetwork",visNetwork);